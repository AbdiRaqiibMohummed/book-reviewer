<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ book.title }}</title>

    <link rel="stylesheet" href="../static/css/review-book.css" />
  </head>
  <body>
    
    <nav class="navbar">
      <a href="/" style="text-decoration: none; color: black"
        ><div class="logo">Book Read</div></a
      >
      <div class="nav-links">
        <nav>
          <a href="/">Home</a>
          <a href="/browse">Browse</a>
          <a href="/contact">Contact</a>
          <a href="/all-reviews">Reviews</a>
          <a style="color: #589d50" href="/signin">Register/Login</a>
        </nav>
      </div>
    </nav>

    <main class="container">
      <section class="book-section">
        <div class="book-cover">
          <a href="/book/{{ book.id }}">
            <img
              src="{{ book.cover_url or 'https://cdn-icons-png.flaticon.com/512/578/578666.png' }}"
              alt="{{ book.title }} cover"
            />
          </a>
        </div>

        <div class="book-details">
          <h1>{{ book.title }}</h1>
          <h2>{{ book.author }}</h2>

          <div class="rating">
            {% for i in range(5) %}
            <span class="star">☆</span>
            {% endfor %}
            <span class="review-count">{{ reviews|length }} Reviews</span>
          </div>

          <h3>Description</h3>
          <p class="description">{{ book.description }}</p>

          <h3>Review Description</h3>
          <form id="reviewForm" class="review-form">
            <input type="text" id="name" placeholder="Your name" required />

            <select id="rating" required>
              <option value="">Rating</option>
              <option value="1">1 ✦</option>
              <option value="2">2 ✦</option>
              <option value="3">3 ✦</option>
              <option value="4">4 ✦</option>
              <option value="5">5 ✦</option>
            </select>

            <textarea
              id="comment"
              placeholder="Write your review..."
            ></textarea>

            <button type="submit">Submit Review</button>
          </form>
        </div>
      </section>

      <section class="reviews-section">
        <h3>Reviews</h3>

        {% if reviews %}
        <ul class="reviews-list">
          {% for r in reviews %}
          <li>
            <strong>{{ r.reviewer_name }}</strong>
            <span>✦ {{ r.rating }}</span>
            <p>{{ r.comment }}</p>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p class="no-reviews">
          No reviews yet. Be the first to review this book!
        </p>
        {% endif %}
      </section>
    </main>

    <script>
      const bookId = "{{ book.id | tojson }}";
    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
